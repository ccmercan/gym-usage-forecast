{% extends "base.html" %}
{% block content %}
<div class="card">
    <h1>‚öôÔ∏è Settings</h1>
    {% if saved %}
    <div class="success">‚úì Settings saved successfully!</div>
    {% endif %}
    
    <form method="post" action="/settings">
        <div class="form-group">
            <label>Email Address</label>
            <input type="email" name="email" value="{{ prefs.email if prefs else '' }}" placeholder="your.email@ttu.edu" required>
        </div>
        
        <div class="form-group">
            <label>Timezone</label>
            <select name="timezone">
                <option value="America/Chicago" {% if prefs and prefs.timezone == 'America/Chicago' %}selected{% endif %}>Central Time (America/Chicago)</option>
                <option value="America/Denver" {% if prefs and prefs.timezone == 'America/Denver' %}selected{% endif %}>Mountain Time</option>
                <option value="America/New_York" {% if prefs and prefs.timezone == 'America/New_York' %}selected{% endif %}>Eastern Time</option>
                <option value="America/Los_Angeles" {% if prefs and prefs.timezone == 'America/Los_Angeles' %}selected{% endif %}>Pacific Time</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Preferred Start Time (HH:MM)</label>
            <input type="time" name="start_time" value="{{ prefs.preferred_start_time_local if prefs else '06:00' }}" required>
        </div>
        
        <div class="form-group">
            <label>Preferred End Time (HH:MM)</label>
            <input type="time" name="end_time" value="{{ prefs.preferred_end_time_local if prefs else '22:00' }}" required>
        </div>
        
        <div class="form-group">
            <label>Crowd Tolerance (%)</label>
            <input type="number" name="tolerance" min="0" max="100" value="{{ prefs.crowd_tolerance_pct if prefs else 50 }}" required>
            <small style="color: #666;">Maximum acceptable usage percentage (0-100)</small>
        </div>
        
        <div class="form-group">
            <label>Preferred Days (comma-separated: 0=Mon, 6=Sun)</label>
            <input type="text" name="preferred_days" value="{% if prefs and prefs.preferred_days %}{{ prefs.preferred_days|join(',') }}{% else %}0,1,2,3,4,5,6{% endif %}" placeholder="0,1,2,3,4,5,6">
            <small style="color: #666;">Example: 0,1,2,3,4 for weekdays only</small>
        </div>
        
        <div class="form-group">
            <label>Areas of Interest (comma-separated facility names)</label>
            <input type="text" name="areas" value="{% if prefs and prefs.areas_of_interest %}{{ prefs.areas_of_interest|join(',') }}{% endif %}" placeholder="Rec Center, Pool, Gym">
            <small style="color: #666;">Leave empty to track all facilities</small>
        </div>
        
        <div class="form-group">
            <label>Digest Send Time (HH:MM)</label>
            <input type="time" name="digest_time" value="{{ prefs.digest_send_time_local if prefs else '07:00' }}">
        </div>
        
        <button type="submit">üíæ Save Settings</button>
    </form>
</div>
{% endblock %}
